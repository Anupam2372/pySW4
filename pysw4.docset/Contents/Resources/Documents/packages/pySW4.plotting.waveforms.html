<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>pySW4.plotting.waveforms module — pySW4 '0.3.0' documentation</title>
<link href="../_static/style.css" rel="stylesheet" type="text/css"/>
<link href="../_static/pygments.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '&#39;0.3.0&#39;',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
<script src="../_static/jquery.js" type="text/javascript"></script>
<script src="../_static/underscore.js" type="text/javascript"></script>
<script src="../_static/doctools.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
<link href="../genindex.html" rel="index" title="Index"/>
<link href="../search.html" rel="search" title="Search"/>
<link href="pySW4.postp.html" rel="next" title="pySW4.postp package"/>
<link href="pySW4.plotting.utils.html" rel="prev" title="pySW4.plotting.utils module"/>
</head>
<body role="document">
<div aria-label="related navigation" class="related" role="navigation">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a accesskey="I" href="../genindex.html" title="General Index">index</a></li>
<li class="right">
<a href="../py-modindex.html" title="Python Module Index">modules</a> |</li>
<li class="right">
<a accesskey="N" href="pySW4.postp.html" title="pySW4.postp package">next</a> |</li>
<li class="right">
<a accesskey="P" href="pySW4.plotting.utils.html" title="pySW4.plotting.utils module">previous</a> |</li>
<li><a href="https://github.com/shaharkadmiel/pySW4">View pySW4 on GitHub</a> | </li>
<li class="nav-item nav-item-0"><a href="../index.html">pySW4 '0.3.0' documentation</a> »</li>
<li class="nav-item nav-item-1"><a href="index.html">pySW4 Library Reference</a> »</li>
<li class="nav-item nav-item-2"><a accesskey="U" href="pySW4.plotting.html">pySW4.plotting package</a> »</li>
</ul>
</div>
<div aria-label="main navigation" class="sphinxsidebar" role="navigation">
<div class="sphinxsidebarwrapper">
<h4>Previous topic</h4>
<p class="topless"><a href="pySW4.plotting.utils.html" title="previous chapter">pySW4.plotting.utils module</a></p>
<h4>Next topic</h4>
<p class="topless"><a href="pySW4.postp.html" title="next chapter">pySW4.postp package</a></p>
<div aria-label="source link" role="note">
<h3>This Page</h3>
<ul class="this-page-menu">
<li><a href="../_sources/packages/pySW4.plotting.waveforms.rst.txt" rel="nofollow">Show Source</a></li>
</ul>
</div>
<div id="searchbox" role="search" style="display: none">
<h3>Quick search</h3>
<form action="../search.html" class="search" method="get">
<div><input name="q" type="text"/></div>
<div><input type="submit" value="Go"/></div>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>
</div>
<div class="document">
<div class="documentwrapper">
<div class="bodywrapper">
<div class="body" role="main">
<div class="section" id="module-pySW4.plotting.waveforms">
<span id="pysw4-plotting-waveforms-module"></span><h1><a name="//apple_ref/cpp/Module/pySW4.plotting.waveforms"></a>pySW4.plotting.waveforms module<a class="headerlink" href="#module-pySW4.plotting.waveforms" title="Permalink to this headline">¶</a></h1>
<p>Plotting routines for observed and synthetic waveforms.</p>
<span class="target" id="module-waveforms"></span><table class="docutils field-list" frame="void" rules="none">
<col class="field-name"/>
<col class="field-body"/>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body"><p class="first">Shahar Shani-Kadmiel (<a class="reference external" href="mailto:kadmiel%40post.bgu.ac.il">kadmiel<span>@</span>post<span>.</span>bgu<span>.</span>ac<span>.</span>il</a>)</p>
<p>Omry Volk (<a class="reference external" href="mailto:omryv%40post.bgu.ac.il">omryv<span>@</span>post<span>.</span>bgu<span>.</span>ac<span>.</span>il</a>)</p>
<p>Tobias Megies (<a class="reference external" href="mailto:megies%40geophysik.uni-muenchen.de">megies<span>@</span>geophysik<span>.</span>uni-muenchen<span>.</span>de</a>)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">copyright:</th><td class="field-body"><p class="first">Shahar Shani-Kadmiel (<a class="reference external" href="mailto:kadmiel%40post.bgu.ac.il">kadmiel<span>@</span>post<span>.</span>bgu<span>.</span>ac<span>.</span>il</a>)</p>
<p>Omry Volk (<a class="reference external" href="mailto:omryv%40post.bgu.ac.il">omryv<span>@</span>post<span>.</span>bgu<span>.</span>ac<span>.</span>il</a>)</p>
<p>Tobias Megies (<a class="reference external" href="mailto:megies%40geophysik.uni-muenchen.de">megies<span>@</span>geophysik<span>.</span>uni-muenchen<span>.</span>de</a>)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">license:</th><td class="field-body"><p class="first last">This code is distributed under the terms of the
GNU Lesser General Public License, Version 3
(<a class="reference external" href="https://www.gnu.org/copyleft/lesser.html">https://www.gnu.org/copyleft/lesser.html</a>)</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">SW4 uses a right handed coordinate system</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>     X
   ⋰
 ⋰
o-------&gt;Y
|
|
V
Z
</pre></div>
</div>
<p>If the azimuth of the SW4 grid is <code class="docutils literal"><span class="pre">0</span></code> this translates to:</p>
<ul class="simple">
<li>X == Northing</li>
<li>Y == Easting</li>
<li>Z == Vertical (inverted!)</li>
</ul>
<dl class="function">
<dt id="pySW4.plotting.waveforms._plot_seismograms"><a name="//apple_ref/cpp/Function/pySW4.plotting.waveforms._plot_seismograms"></a>
<code class="descname">_plot_seismograms</code><span class="sig-paren">(</span><em>st_synth_</em>, <em>st_real_</em>, <em>channel_map</em>, <em>unit_label</em>, <em>outfile</em>, <em>figsize=None</em>, <em>info_text=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pySW4/plotting/waveforms.html#_plot_seismograms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySW4.plotting.waveforms._plot_seismograms" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function that plots synthetic vs. real data to an image file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"/>
<col class="field-body"/>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>st_synth</strong> : <a class="reference external" href="https://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.stream.Stream</span></code></a></p>
<blockquote>
<div><p>Synthetic waveform data.</p>
</div></blockquote>
<p><strong>st_real</strong> : <a class="reference external" href="https://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.stream.Stream</span></code></a></p>
<blockquote>
<div><p>Observed waveform data.</p>
</div></blockquote>
<p><strong>channel_map</strong> : dict</p>
<blockquote>
<div><p>Mapping dictionary to match synthetic channel to component in
observed data.</p>
</div></blockquote>
<p><strong>unit_label</strong> : str</p>
<blockquote>
<div><p>Label string for y-axis of waveforms.</p>
</div></blockquote>
<p><strong>outfile</strong> : str</p>
<blockquote>
<div><p>Output filename (absolute or relative path) for image including
suffix (e.g. png).</p>
</div></blockquote>
<p><strong>figsize</strong> : 2-tuple of floats</p>
<blockquote class="last">
<div><p>Matplotlib figure size (inches x/y).</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>
<dl class="function">
<dt id="pySW4.plotting.waveforms.create_seismogram_plots"><a name="//apple_ref/cpp/Function/pySW4.plotting.waveforms.create_seismogram_plots"></a>
<code class="descname">create_seismogram_plots</code><span class="sig-paren">(</span><em>input_file</em>, <em>folder=None</em>, <em>stream_observed=None</em>, <em>inventory=None</em>, <em>water_level=None</em>, <em>pre_filt=None</em>, <em>filter_kwargs=None</em>, <em>channel_map=None</em>, <em>used_stations=None</em>, <em>synthetic_starttime=None</em>, <em>synthetic_data_glob='*.?v'</em>, <em>t0_correction_fraction=0.0</em>, <em>synthetic_scaling=False</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pySW4/plotting/waveforms.html#create_seismogram_plots"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySW4.plotting.waveforms.create_seismogram_plots" title="Permalink to this definition">¶</a></dt>
<dd><p>Create all waveform plots, comparing synthetic and observed data.</p>
<p>Ideally works on a SW4 input file, or explicitely on an folder with
SW4 output files. Assumes output in SAC format. Observed/real data
and station metadata can be specified, along with deconvolution
parameters to get to physical units.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"/>
<col class="field-body"/>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>input_file</strong> : str</p>
<blockquote>
<div><p>Filename (potentially with absolute/relative path) of SW4 input
file used to control the simulation. Use <code class="docutils literal"><span class="pre">None</span></code> to work on
folder with SW4 output without using metadata from input file.</p>
</div></blockquote>
<p><strong>folder</strong> : str</p>
<blockquote>
<div><p>Folder with SW4 output files or <code class="docutils literal"><span class="pre">None</span></code> if output folder
location can be used from input file. Only needed when no input
file is specified or if output folder was moved to a different
location after the simulation.</p>
</div></blockquote>
<p><strong>stream_observed</strong> : <a class="reference external" href="https://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.stream.Stream</span></code></a></p>
<blockquote>
<div><p>Observed/real data to compare with synthetics.</p>
</div></blockquote>
<p><strong>inventory</strong> : <a class="reference external" href="https://docs.obspy.org/packages/autogen/obspy.core.inventory.inventory.Inventory.html#obspy.core.inventory.inventory.Inventory" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.inventory.inventory.Inventory</span></code></a></p>
<blockquote>
<div><p>Station metadata for observed/real data.</p>
</div></blockquote>
<p><strong>water_level</strong> : float</p>
<blockquote>
<div><p>Water level for instrument response removal (see
<code class="xref py py-meth docutils literal"><span class="pre">obspy.core.trace.remove_response()</span></code>).</p>
</div></blockquote>
<p><strong>pre_filt</strong> : 4-tuple of float</p>
<blockquote>
<div><p>Frequency domain pre-filtering in response removal (see
<a class="reference external" href="https://docs.obspy.org/packages/autogen/obspy.core.trace.Trace.remove_response.html#obspy.core.trace.Trace.remove_response" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-meth docutils literal"><span class="pre">obspy.core.trace.Trace.remove_response()</span></code></a>).</p>
</div></blockquote>
<p><strong>filter_kwargs</strong> : dict</p>
<blockquote>
<div><p>Filter parameters for filtering applied to observed data after
response removal before comparison to synthetic data. <code class="docutils literal"><span class="pre">kwargs</span></code>
are passed on to <a class="reference external" href="https://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.filter.html#obspy.core.stream.Stream.filter" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-meth docutils literal"><span class="pre">obspy.core.stream.Stream.filter()</span></code></a>.</p>
</div></blockquote>
<p><strong>channel_map</strong> : dict</p>
<blockquote>
<div><p>Mapping dictionary to match synthetic channel to component in
observed data.</p>
</div></blockquote>
<p><strong>used_stations</strong> : list</p>
<blockquote>
<div><p>Station codes to consider in plot output. Use all stations if
left <code class="docutils literal"><span class="pre">None</span></code>.</p>
</div></blockquote>
<p><strong>synthetic_starttime</strong> : <a class="reference external" href="https://docs.obspy.org/packages/autogen/obspy.core.utcdatetime.UTCDateTime.html#obspy.core.utcdatetime.UTCDateTime" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.utcdatetime.UTCDateTime</span></code></a></p>
<blockquote>
<div><p>Start time of synthetic data, only needed if no input file is
specified or if input file did not set the correct origin time
of the event.</p>
</div></blockquote>
<p><strong>synthetic_data_glob</strong> : str</p>
<blockquote>
<div><p>Glob pattern to lookup synthetic data. Use e.g.
‘*.[xyz]’ or ‘*.?’ for synthetic data saved as “displacement”
(the solution of the forward solver), or ‘*.?v’ for synthetic
data saved as “velocity” (the differentiated solution of the
forward solver).</p>
</div></blockquote>
<p><strong>t0_correction_fraction</strong> : float</p>
<blockquote>
<div><p>Fraction of t0 used in SW4 simulation
(offset of source time function to prevent solver artifacts) to
account for (i.e. shift synthetics left to earlier absolute
time). ‘0.0’ means no correction of synthetics time is done,
‘1.0’ means that synthetic trace is shifted left in time by
<code class="docutils literal"><span class="pre">t0</span></code> of SW4 run.</p>
</div></blockquote>
<p><strong>synthetic_scaling</strong> : bool or float</p>
<blockquote class="last">
<div><p>Scaling to apply to synthetic seismograms. If
<code class="docutils literal"><span class="pre">False</span></code>, no scaling is applied. If a float is provided, all
synthetics’ will be scaled with the given factor (e.g. using
<code class="docutils literal"><span class="pre">2.0</span></code> will scale up synthetics by a factor of 2).</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>
<dl class="function">
<dt id="pySW4.plotting.waveforms.plot_traces"><a name="//apple_ref/cpp/Function/pySW4.plotting.waveforms.plot_traces"></a>
<code class="descname">plot_traces</code><span class="sig-paren">(</span><em>traces</em>, <em>mode=''</em>, <em>yscale='auto'</em>, <em>hspace=0.2</em>, <em>wspace=0.05</em>, <em>figsize=None</em>, <em>fig=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pySW4/plotting/waveforms.html#plot_traces"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySW4.plotting.waveforms.plot_traces" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot all traces and their Fourier specra side-by-side.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name"/>
<col class="field-body"/>
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>traces</strong> : <code class="xref py py-class docutils literal"><span class="pre">Stream</span></code></p>
<blockquote>
<div><p>Traces to be plotted in an <code class="xref py py-class docutils literal"><span class="pre">Stream</span></code> object.</p>
</div></blockquote>
<p><strong>mode</strong> : {‘displacement’, ‘velocity’, ‘div’, ‘curl’, ‘strains’}</p>
<blockquote>
<div><p>Mode describes the type of data in traces.</p>
<p>Optionaly, an alternative string can be given that will be used
as the y-label of the time-histories.</p>
</div></blockquote>
<p><strong>yscale</strong> : {‘auto’, ‘all’, ‘normalize’}</p>
<blockquote>
<div><p>Set the scale of the vertical y-axis:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">auto</span></code> - Vertical scale of each axes is automatically set to
the -|max| and |max| of each trace.</li>
<li><code class="docutils literal"><span class="pre">all</span></code> - Vertical scale of all axes is set to the same limits
which are the -|max| and |max| of all traces.</li>
<li><code class="docutils literal"><span class="pre">normalize</span></code> - Each trace is normalized and plotted
(<code class="docutils literal"><span class="pre">ylim=(-1,</span> <span class="pre">1)</span></code>).</li>
</ul>
</div></blockquote>
<p><strong>hspace</strong> : float</p>
<blockquote>
<div><p>The hight space between axes. See
<a class="reference external" href="http://matplotlib.org/api/gridspec_api.html#matplotlib.gridspec.GridSpec" title="(in Matplotlib v2.0.2)"><code class="xref py py-class docutils literal"><span class="pre">GridSpec</span></code></a> documentation.</p>
</div></blockquote>
<p><strong>wspace</strong> : float</p>
<blockquote>
<div><p>The width space between axes. See
<a class="reference external" href="http://matplotlib.org/api/gridspec_api.html#matplotlib.gridspec.GridSpec" title="(in Matplotlib v2.0.2)"><code class="xref py py-class docutils literal"><span class="pre">GridSpec</span></code></a> documentation.</p>
</div></blockquote>
<p><strong>figsize</strong> : 2-tuple</p>
<blockquote>
<div><p>Size of the <a class="reference external" href="http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v2.0.2)"><code class="xref py py-class docutils literal"><span class="pre">Figure</span></code></a>.</p>
</div></blockquote>
<p><strong>fig</strong> : <a class="reference external" href="http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v2.0.2)"><code class="xref py py-class docutils literal"><span class="pre">Figure</span></code></a></p>
<blockquote>
<div><p>A <a class="reference external" href="http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v2.0.2)"><code class="xref py py-class docutils literal"><span class="pre">Figure</span></code></a> instance.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Other Parameters:</th></tr>
<tr class="field-even field"><td> </td><td class="field-body"><p class="first last"><strong>kwargs</strong> : <a class="reference external" href="http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.plot" title="(in Matplotlib v2.0.2)"><code class="xref py py-func docutils literal"><span class="pre">plot()</span></code></a> propeties.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>
</div>
</div>
</div>
</div>
<div class="clearer"></div>
</div>
<div aria-label="related navigation" class="related" role="navigation">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a href="../genindex.html" title="General Index">index</a></li>
<li class="right">
<a href="../py-modindex.html" title="Python Module Index">modules</a> |</li>
<li class="right">
<a href="pySW4.postp.html" title="pySW4.postp package">next</a> |</li>
<li class="right">
<a href="pySW4.plotting.utils.html" title="pySW4.plotting.utils module">previous</a> |</li>
<li><a href="https://github.com/shaharkadmiel/pySW4">View pySW4 on GitHub</a> | </li>
<li class="nav-item nav-item-0"><a href="../index.html">pySW4 '0.3.0' documentation</a> »</li>
<li class="nav-item nav-item-1"><a href="index.html">pySW4 Library Reference</a> »</li>
<li class="nav-item nav-item-2"><a href="pySW4.plotting.html">pySW4.plotting package</a> »</li>
</ul>
</div>
<div class="footer" role="contentinfo">
        © Copyright 2012-2016, Shahar Shani-Kadmiel, Omry Volk, Tobias Megies.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.
    </div>
</body>
</html>